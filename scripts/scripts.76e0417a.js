"use strict";function deleteItem(a){window.confirm("Do you really want to delete?")&&(a.target.parentNode.parentNode.remove(),Materialize.toast("Sticker deleted!",4e3))}angular.module("photoStickerAppApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"})}]),angular.module("photoStickerAppApp").controller("MainCtrl",["$scope",function(a){angular.element(document).ready(function(){angular.element(".modal-trigger").leanModal()}),a.uploadPhoto=function(b){var c=b.target,d=new FileReader;d.onload=function(){var b=d.result,c='<div class="photo" style="background-image:url('+b+')"></div>';angular.element("#photos").append(c),angular.element(".file-path").val(""),Materialize.toast("Photo Uploaded!",4e3),angular.element("#start_over").removeClass("disabled"),a.attachHoverDelete(".photo"),a.attachDragEvent()},d.readAsDataURL(c.files[0])},a.startOver=function(){angular.element("#photos").find("div").remove(),angular.element("#stickers").find("li").remove(),Materialize.toast("All reset!",4e3),angular.element("#start_over").addClass("disabled")},a.validate=function(){var b=angular.element("#upload_form_st input[type=file]")[0].files.length,c=angular.element("#sticker_title").val();""!=c&&0!=b?angular.element("#btn-sticker").removeClass("disabled"):angular.element("#btn-sticker").addClass("disabled"),a.errorMsg(c,b)},a.uploadSticker=function(){var b=angular.element("#upload_form_st input[type=file]")[0].files.length,c=angular.element("#sticker_title").val();if(""==c||0==b)return a.errorMsg(c,b),!1;var d=angular.element("#upload_form_st input[type=file]")[0],e=new FileReader;e.onload=function(){var b=e.result,d='<li class="sticker"><img class="draggable" src="'+b+'"/><p class="title">'+c+'</p><span class="delete" onclick="deleteItem(event)"><i class="fa fa-times"></i></span></li>';angular.element("#stickers").append(d),angular.element(".file-path").val(""),angular.element("#sticker_title").val(""),Materialize.toast("Sticker Uploaded!",4e3),angular.element("#start_over").removeClass("disabled"),a.attachHoverDelete(".sticker"),a.attachDragEvent()},e.readAsDataURL(d.files[0]),angular.element("#upload_sticker").closeModal()},a.attachHoverDelete=function(a){angular.element(a).hover(function(){angular.element(this).find(".delete").fadeIn()},function(){angular.element(this).find(".delete").fadeOut()})},a.errorMsg=function(a,b){""==a?document.getElementsByClassName("error")[1].innerHTML="Value required!":document.getElementsByClassName("error")[1].innerHTML="",0==b?document.getElementsByClassName("error")[0].innerHTML="Value required!":document.getElementsByClassName("error")[0].innerHTML=""},a.attachDragEvent=function(){angular.element(".draggable").draggable({helper:"clone",revert:"invalid"}),angular.element(".photo").droppable({activeClass:"sticker_img",hoverClass:"sticker_img",accept:".draggable",drop:function(a,b){var c=angular.element("<div></div>"),d=angular.element('<span class="delete" onclick="deleteItem(event)"><i class="fa fa-times"></i></span>'),e=b.helper[0].cloneNode(),f=angular.element(e).attr("style");angular.element(e).attr("style",""),angular.element(e).addClass("sticker_img"),c.attr("style",f),c.append(e),c.append(d),this.appendChild(c[0])}})}}]),angular.module("photoStickerAppApp").directive("customOnChange",function(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.customOnChange);b.bind("change",d)}}}),angular.module("photoStickerAppApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="row"> <div class="col s10" id="photo_area"> <h5>Photo Area<h5> <div id="cx"> <span class="hint--bottom left" data-hint="Start Over"><a id="start_over" href="javascript:void(0);" ng-click="startOver()" class="btn-floating red disabled"><i class="fa fa-undo"></i></a></span> <div id="upload_form_pa" class="left"> <form action="#"> <div class="file-field input-field"> <div class="btn"> <span>Image</span> <input type="file" accept="image/*" custom-on-change="uploadPhoto"> </div> <div class="file-path-wrapper"> <input class="file-path validate" type="text" placeholder="Upload Image"> </div> </div> </form> </div> </div> <div class="clearfix"></div> <!--displays photos here--> <div id="photos" class="droppable"></div> <!-- end --> </h5></h5></div> <div class="col s2" id="sticker_area"> <div> <h5 class="left">Sticker Area</h5> <span id="upload_sticker_btn" class="hint--left left" data-hint="Upload new Sticker"><a href="#upload_sticker" class="btn-floating modal-trigger"><i class="fa fa-plus"></i></a></span> </div> <!--displays stickers here--> <br> <ul id="stickers"></ul> <!-- end --> <div class="clearfix"></div> </div> <!-- Modal Structure --> <div id="upload_sticker" class="modal"> <div class="modal-content"> <h4>Upload Sticker</h4> <!-- sticker file --> <div id="upload_form_st" class="left"> <form action="#"> <div class="file-field input-field"> <div class="btn"> <span>Image</span> <input type="file" accept="image/*" custom-on-change="validate"> </div> <div class="file-path-wrapper"> <input class="file-path validate" type="text" placeholder="Upload Image"> <div class="error"></div> </div> </div> </form> </div> <div class="row"> <div class="input-field col s6"> <input id="sticker_title" type="text" class="validate" custom-on-change="validate"> <div class="error"></div> <label for="sticker_title">Sticker Title</label> </div> </div> </div> <div class="modal-footer"> <a class="waves-effect waves-green btn disabled" id="btn-sticker" ng-click="uploadSticker()">Upload</a> </div> <!-- modal-action modal-close --> </div> </div>')}]);